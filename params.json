{"name":"Vpn-tunnel","tagline":"create a vpn tunnel between two networks two using two ipsec enabled linux systems","body":"Connect two linux networks together via vpn.  Handy for connecting clouds together or colo and clouds or whatever ...\r\n\r\n```clojure\r\n\r\n(def tunnel (nth (:tunnels (read-config)) 0) )\r\n(def grp-name (:name tunnel))\r\n(def tmpl (slurp (:template-path tunnel)) )\r\n(def left-spec (create-ipsec-spec {:ipsec-cfgs (:lan-A tunnel) :template tmpl}))\r\n(def right-spec (create-ipsec-spec {:ipsec-cfgs (:lan-B tunnel) :template tmpl}))\r\n(def base-server (server-spec :phases {:bootstrap (plan-fn (automated-admin-user))}))\r\n(def left-group (group-spec grp-name :extends [base-server left-spec]))\r\n(def right-group (group-spec grp-name :extends [base-server right-spec]))\r\n(def aws (pallet.configure/compute-service  :aws))\r\n(def left (pallet.api/converge {left-group 1} :compute aws))\r\n(def rs (pallet.configure/compute-service :rs))\r\n(def right (pallet.api/converge {right-group 1} :compute rs))\r\n(def test-spec (create-vpn-tunnel-group-spec (read-config)))\r\n\r\n\r\n(def result  (lift (:left test-spec)))\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}